<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="FFmpeg #  FFmpeg/FFmpeg Fast Forward Moving Picture Experts Group
FFmpeg is a collection of libraries and tools to process multimedia content such as audio, video, subtitles and related metadata.
安装 #  linux 安装 ffmpeg
https://www.tecmint.com/install-ffmpeg-in-linux/
ffmpeg -re -i car-brand.MOV -rtsp_transport tcp -vcodec h264 -f rtsp rtsp://localhost/test ffplay #  # 添加到 ~/.zshrc function rtsp() { ffplay -analyzeduration 1000000 -fflags nobuffer -probesize 32 -sync ext $@ }  命令 #  ffmpeg -i rtsp://admin:root123@192.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="FFmpeg" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://ikingye.github.io/note-cs/docs/others/skill/ffmpeg/" />

<title>FFmpeg | 计算机学习笔记</title>
<link rel="manifest" href="/note-cs/manifest.json">
<link rel="icon" href="/note-cs/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/note-cs/book.min.054d088be523033861c169923260cc3eacd88fa7d58c8be9c5071b5a83323017.css" integrity="sha256-BU0Ii&#43;UjAzhhwWmSMmDMPqzYj6fVjIvpxQcbWoMyMBc=">
<script defer src="/note-cs/en.search.min.08442cab10952ef6716e1c24ccd06cc7266489f5d90154b60bf8de5b1a2793d0.js" integrity="sha256-CEQsqxCVLvZxbhwkzNBsxyZkifXZAVS2C/jeWxonk9A="></script>
<link rel="alternate" type="application/rss+xml" href="https://ikingye.github.io/note-cs/docs/others/skill/ffmpeg/index.xml" title="计算机学习笔记" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/note-cs"><span>计算机学习笔记</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



<ul>
    <li><a href="https://kingye.me" target="_blank" rel="noopener noreferrer">博客</a></li>
    <li><a href="https://github.com/ikingye" target="_blank" rel="noopener noreferrer">Github</a></li>
    <li><a href="https://weibo.com/kingyip15215" target="_blank" rel="noopener noreferrer">
      微博  <img src="http://www.sinaimg.cn/blog/developer/wiki/LOGO_16x16.png">
    </a></li>
    <li><a href="https://www.zhihu.com/people/wutongyip" target="_blank" rel="noopener noreferrer">知乎</a></li>
  <li><a href="//shang.qq.com/wpa/qunwpa?idkey=04022778c1def4c4938c6d1e1880f6db3abf67bbfccc9ff74baa4fa9d73c377f&source_id=1_40001" target="_blank" rel="noopener noreferrer">Q 群</a></li>
</ul>
<hr />








  



  
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <span>第一部分 基础</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note-cs/docs/basic/computer-composition/" class="">1.1 计算机组成原理</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/basic/os/" class="collapsed ">1.2 操作系统</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/basic/algs/" class="">1.3 数据结构与算法</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/basic/network/" class="">1.4 计算机网络</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/basic/pl/" class="collapsed ">1.5 编程语言</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/basic/compile/" class="collapsed ">1.6 编译原理</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <span>第二部分 方向</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note-cs/docs/direction/se/" class="collapsed ">2.1 软件工程</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/direction/be/" class="collapsed ">2.2 后端</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/direction/fe/" class="collapsed ">2.3 前端</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/direction/client/" class="collapsed ">2.4 客户端</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/direction/embedded/" class="collapsed ">2.5 嵌入式</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/direction/security/" class="collapsed ">2.6 安全</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/direction/mp/" class="collapsed ">2.7 中台</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <span>第三部分 领域</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note-cs/docs/domain/cc/" class="collapsed ">3.1 云计算</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/domain/bigdata/" class="collapsed ">3.2 大数据</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/domain/ai/" class="collapsed ">3.3 人工智能</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <span>第四部分 其他</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note-cs/docs/others/skill/" class="collapsed ">4.2 技能树</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/note-cs/docs/others/skill/communication/" class="collapsed ">通信技术</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/others/skill/debug/" class="collapsed ">Debug</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/others/skill/lorawan/" class="collapsed ">LoRaWan</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/others/skill/ffmpeg/" class="collapsed active">FFmpeg</a>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/others/skill/gb28181/" class="collapsed ">GB28181</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/others/skill/voip/" class="">VoIP</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/others/skill/onvif/" class="collapsed ">ONVIF</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/others/skill/easydarwin/" class="">EasyDarwin</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/others/skill/srs/" class="">SRS</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/others/skill/zlmediakit/" class="">ZLMediaKit</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/others/skill/stream-media/" class="collapsed ">流媒体技术</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/others/tool/" class="collapsed ">4.3 工具</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/book/" class="collapsed ">第五部分 读书</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/note-cs/docs/course/" class="collapsed ">第六部分 课程</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  














<hr />
<ul>
  <li><a href="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200417021727.png" target="_blank" rel="noopener noreferrer">关注微信公众号</a></li>
  <li><a href="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200428110046.png" target="_blank" rel="noopener noreferrer">请我喝饮料</a></li>
  <li><a href="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200417022040.png" target="_blank" rel="noopener noreferrer">加我微信</a></li>
</ul>

</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/note-cs/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>FFmpeg</strong>

  <label for="toc-control">
    
    <img src="/note-cs/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#安装">安装</a>
      <ul>
        <li><a href="#ffplay">ffplay</a></li>
      </ul>
    </li>
    <li><a href="#命令">命令</a>
      <ul>
        <li><a href="#ffmpeg-参数">ffmpeg 参数</a></li>
        <li><a href="#h264_nvenc-vs-libx264-vs-h264"><code>h264_nvenc</code> vs <code>libx264</code> vs <code>h264</code></a></li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="ffmpeg">
  FFmpeg
  <a class="anchor" href="#ffmpeg">#</a>
</h1>
<p><a href="https://github.com/FFmpeg/FFmpeg">FFmpeg/FFmpeg</a> <img src="https://img.shields.io/github/stars/FFmpeg/FFmpeg.svg" alt="Github stars" /></p>
<p><code>Fast Forward Moving Picture Experts Group</code></p>
<p>FFmpeg is a collection of libraries and tools to process multimedia content such as audio, video, subtitles and related metadata.</p>
<h2 id="安装">
  安装
  <a class="anchor" href="#%e5%ae%89%e8%a3%85">#</a>
</h2>
<p>linux 安装 ffmpeg</p>
<p><a href="https://www.tecmint.com/install-ffmpeg-in-linux/">https://www.tecmint.com/install-ffmpeg-in-linux/</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">ffmpeg -re -i car-brand.MOV -rtsp_transport tcp -vcodec h264 -f rtsp rtsp://localhost/test
</code></pre></div><h3 id="ffplay">
  ffplay
  <a class="anchor" href="#ffplay">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 添加到 ~/.zshrc</span>
<span style="color:#66d9ef">function</span> rtsp<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
	ffplay -analyzeduration <span style="color:#ae81ff">1000000</span> -fflags nobuffer -probesize <span style="color:#ae81ff">32</span> -sync ext $@
<span style="color:#f92672">}</span>
</code></pre></div><hr>
<h2 id="命令">
  命令
  <a class="anchor" href="#%e5%91%bd%e4%bb%a4">#</a>
</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">ffmpeg -i rtsp://admin:root123@192.168.66.119/ -vcodec copy -acodec copy  -rtsp_transport tcp -f rtsp rtsp://127.0.0.1/test.sdp

<span style="color:#75715e"># 音视频转码后推送</span>
ffmpeg -i rtsp://admin:root123@192.168.66.119/ -vcodec libx264 -acodec libvo_aacenc  -rtsp_transport tcp -f rtsp rtsp://127.0.0.1/test.sdp

ffmpeg -re -i ./car-brand.MOV -stream_loop -1  -vcodec libx264 -acodec aac -f rtsp rtsp://10.159.11.167:8194/car-brand
ffmpeg -re -i ./car-brand.MOV -rtsp_transport tcp -vcodec h264 -f rtsp rtsp://localhost/test
ffmpeg -re -i ./car-brand.MOV -rtsp_transport udp -vcodec h264 -f rtsp rtsp://localhost/test

ffmpeg -re -stream_loop -1 -i carbrand.MOV -rtsp_transport tcp -vcodec h264 -f rtsp rtsp://localhost/test1
ffmpeg -re -stream_loop -1 -i carbrand.MOV -c copy                          -f rtsp rtsp://localhost:8554/mystream

</code></pre></div><h3 id="ffmpeg-参数">
  ffmpeg 参数
  <a class="anchor" href="#ffmpeg-%e5%8f%82%e6%95%b0">#</a>
</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># 参考文档 https://ffmpeg.org/ffmpeg.html</span>

Main options:
<span style="color:#75715e"># Force input or output file format. The format is normally auto detected for input files and guessed from the file extension for output files, so this option is not needed in most cases.</span>
-f fmt              force format
<span style="color:#75715e"># Select an encoder (when used before an output file)</span>
<span style="color:#75715e"># or a decoder (when used before an input file) for one or more streams.</span>
<span style="color:#75715e"># codec is the name of a decoder/encoder</span>
<span style="color:#75715e"># or a special value copy (output only) to indicate that the stream is not to be re-encoded.</span>
-c codec            codec name
-codec codec        codec name
<span style="color:#75715e"># input file url</span>
-i url
<span style="color:#75715e"># Set number of times input stream shall be looped. Loop 0 means no loop, loop -1 means infinite loop.</span>
<span style="color:#75715e"># -1 无限循环</span>
-stream_loop number

Video options:
-r rate             set frame rate <span style="color:#f92672">(</span>Hz value, fraction or abbreviation<span style="color:#f92672">)</span>
-vcodec codec       force video codec <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;copy&#39;</span> to copy stream<span style="color:#f92672">)</span>

Audio options:
-acodec codec       force audio codec <span style="color:#f92672">(</span><span style="color:#e6db74">&#39;copy&#39;</span> to copy stream<span style="color:#f92672">)</span>

<span style="color:#75715e"># Read input at native frame rate. Mainly used to simulate a grab device, or live input stream (e.g. when reading from a file).</span>
<span style="color:#75715e"># 用来模拟一个摄像头或者实时流，不要在正式环境使用</span>
-re
</code></pre></div><hr>
<h3 id="h264_nvenc-vs-libx264-vs-h264">
  <code>h264_nvenc</code> vs <code>libx264</code> vs <code>h264</code>
  <a class="anchor" href="#h264_nvenc-vs-libx264-vs-h264">#</a>
</h3>
<p>h264_nvenc uses the NVidia hardware assisted H.264 video encoder.
libx264 is a software (CPU) based H.264 encoder.</p>
<p>参考：</p>
<ul>
<li><a href="https://stackoverflow.com/questions/57529461/what-is-the-difference-between-libx264-and-h264-nvenc">What is the difference between libx264 and h264_nvenc?</a></li>
</ul>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



  <div><a class="flex align-center" href="https://github.com/ikingye/note-cs/commit/7eff89e331463e8c00c3844fcb602baa49b6d0d0" title='Last modified by yewang | 2020-06-16' target="_blank" rel="noopener">
      <img src="/note-cs/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>2020-06-16</span>
    </a>
  </div>



</div>

 
        
      </footer>

      
  
  <div class="book-comments">
<script src="https://utteranc.es/client.js"
  repo="ikingye/note-cs"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async>
</script>

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#安装">安装</a>
      <ul>
        <li><a href="#ffplay">ffplay</a></li>
      </ul>
    </li>
    <li><a href="#命令">命令</a>
      <ul>
        <li><a href="#ffmpeg-参数">ffmpeg 参数</a></li>
        <li><a href="#h264_nvenc-vs-libx264-vs-h264"><code>h264_nvenc</code> vs <code>libx264</code> vs <code>h264</code></a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
<a href="https://github.com/ikingye/note-cs"
class="github-corner" aria-label="View source on GitHub">
<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#151513; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
  <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
  <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
  <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
</svg></a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

</body>

</html>












